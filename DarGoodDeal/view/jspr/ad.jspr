<!DOCTYPE html>
<html>
	<head>
		<meta charset="{contentEncoding}"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>{title}</title>
		<link rel="stylesheet" type="text/css" href="css/style.css" />
		<script src="js/jquery.js"></script>
	</head>
	<body style="background-color: #e1d9ab;">
		<div class="container">
			<section class="main">
				<form class="form">
					<h1><span class="log-in">{adTitle}</span></h1>
					<p class="float">
                        <b>{price} EUR</b>
                        </br>
                        {content}
					</p>
					<p class="clearfix">
                        <input type="button" id="update" value="Update"/>
						<input type="button" id="delete" value="Delete"/>
					</p>
				</form>​​
			</section>
        </div>
		
		<script>
		  	$(document).ready(function(){
		  		$("#update").click(function(){
			        $("body").html("<div style="margin-left:35%">" +
									  "<h1>New ad informations</h1>" +
									  "<form>" +
									   	"<p><input type=\"text\" name=\"title\" placeholder=\"Title\" value=\"{adTitle}\"></p>" +
									 	"<p><input type=\"text\" name=\"price\" placeholder=\"Price\" value=\"{price}\"></p>" +
									 	"<p><textarea name=\"content\" rows=\"20\" cols=\"70\" value=\"{content}\"></textarea></p>" +
									   	"<p><span>" +
										   	"<button id=\"updSub\">Valid</button>" +
										   	"<button id=\"cancel\" style=\"margin-left:10px\">Cancel</button>" +
										"</span></p>" +
									  "</form>" +
									"</div>");
			    });
			    $("#delete").click(function(){
			        $.ajax({
			        	type: 'DELETE',
			        	url:"http://localhost:1024/good-deal/{adId}/delete-ad", 
			        	success: function(result){$("body").html(result);}
			        });
			    });
			    $("body").on("submit", "form", function(e){
			    	e.preventDefault();
			    	var title = $("input[name=title]").val();
			    	var price = $("input[name=price]").val();
			    	var content = $("textarea[name=content]").val();
			    	
			    	$.ajax({
			        	type: 'PUT',
			        	url:"http://localhost:1024/good-deal/{adId}/update-ad",
			        	data:"title=" + title + 
			        		 "&price=" + price + 
			        		 "&content=" + content,
			        	success: function(result){$("body").html(result);}
			        });
			    	return false;
			    });
			    $("body").on("click", "#cancel", function(){
			        $("body").html("<p>" +
										"<h3>{adTitle}</h3><b>Price:{price} EUR</b><br/><p>{content}</p>" +
										"<span>" +
											"<button id=\"update\">Update</button>" +
											"<button id=\"delete\" style=\"margin-left:10px\">Delete</button>" +
										"</span>" +
									"</p>");
			    });
			});
		</script>
	</body>
</html>